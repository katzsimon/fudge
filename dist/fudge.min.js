(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.r(e),t.d(e,{default:()=>u});const o={insertAfter:function(t,e){"string"==typeof t&&(t=document.querySelector(t)),"string"==typeof e&&(e=this.html(e)),"object"===i(e)&&t.parentNode.insertBefore(e,t.nextSibling)},empty:function(t){return""===t||null==t||0===t.length||!1===t},cast:function(t){var e=this;return"object"===i(t)&&Object.entries(this.opts).forEach((function(i){var s=i[0],n=i[1];"true"===n&&(t[s]=!0),"false"===n&&(t[s]=!1),e.isStringInteger(n)&&(t[s]=parseInt(n))})),t},isStringInteger:function(t){var e=new RegExp("^[0-9]+$");return"string"==typeof t&&e.test()},triggerEvent:function(t,e){var i=new CustomEvent(e);void 0!==t.dispatchEvent&&t.dispatchEvent(i)},html:function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild},getDataOptions:function(t,e){var i,s=this;e=null!==(i=e)&&void 0!==i?i:"";var n={};return null!==t&&Object.keys(this.defaults).forEach((function(i){var o,l="data-".concat(e,"-").concat(s.toSnakeCase(i)),a="data-".concat(s.toSnakeCase(i)),u="data-".concat(e,"ignore-").concat(s.toSnakeCase(i)),d=null;null!==(d=t.hasAttribute(u)?t.getAttribute(l):null!==(o=t.getAttribute(l))&&void 0!==o?o:t.getAttribute(a))&&(n[i]=d)})),n},toCamelCase:function(t){return t.replace(/([-_][a-z])/gi,(function(t){return t.toUpperCase().replace("-","").replace("_","")}))},toSnakeCase:function(t){return t.replace(/[A-Z]/g,(function(t){return"_".concat(t.toLowerCase())}))}};function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}const u=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"defaults",{zindex:null,tagLimit:-1,closeOnTagLimit:!0,mode:"select",glue:",",glueOption:"::",glueEnd:!0,add:!1,iconDropdown:'<svg viewBox="0 0 512 512"><path d="m397 160l19 21-160 171-160-171 19-21 141 151z"/></svg>',iconSearch:'<svg viewBox="0 0 512 512"><path d="m496 436l-121-103c-13-12-26-17-37-16 29-34 46-77 46-125 0-106-86-192-192-192-106 0-192 86-192 192 0 106 86 192 192 192 48 0 91-17 125-46-1 11 4 24 16 37l103 121c17 20 46 21 64 4 17-18 16-47-4-64z m-304-116c-71 0-128-57-128-128 0-71 57-128 128-128 71 0 128 57 128 128 0 71-57 128-128 128z"></path></svg>',iconAdd:'<svg viewBox="0 0 512 512"><path d="m457 210l0 55c0 8-3 14-8 20-5 5-12 8-19 8l-119 0 0 118c0 8-3 15-8 20-5 5-12 8-20 8l-54 0c-8 0-15-3-20-8-5-5-8-12-8-20l0-118-119 0c-7 0-14-3-19-8-5-6-8-12-8-20l0-55c0-7 3-14 8-19 5-5 12-8 19-8l119 0 0-119c0-8 3-14 8-19 5-6 12-8 20-8l54 0c8 0 15 2 20 8 5 5 8 11 8 19l0 119 119 0c7 0 14 3 19 8 5 5 8 12 8 19z"></path></svg>',iconRemove:'<svg viewBox="0 0 512 512"><path d="m426 378c0 7-3 14-8 19l-39 39c-5 5-12 8-20 8-7 0-14-3-19-8l-84-84-84 84c-5 5-12 8-19 8-8 0-15-3-20-8l-39-39c-5-5-8-12-8-19 0-8 3-14 8-20l84-84-84-84c-5-5-8-12-8-19 0-8 3-14 8-20l39-38c5-6 12-8 20-8 7 0 14 2 19 8l84 84 84-84c5-6 12-8 19-8 8 0 15 2 20 8l39 38c5 6 8 12 8 20 0 7-3 14-8 19l-84 84 84 84c5 6 8 12 8 20z"></path></svg>',msgNoResults:"No Matching Results",theme:"",maxDropdownHeight:null,showTarget:!1,placeholder:"",glowDisable:!1,options:[]}),n(this,"options",{}),n(this,"addedTags",0),n(this,"mode","select"),n(this,"opts",{}),n(this,"target",null),n(this,"targetStyle",""),n(this,"targetClass",""),n(this,"add",!1),n(this,"opened",!1),n(this,"opening",!1),n(this,"clickedInsideFunction",null),n(this,"value",""),n(this,"fudge",null),n(this,"dropdown",null),n(this,"openclose",null),n(this,"items",null),n(this,"selected",null),n(this,"display",null),n(this,"input",null),n(this,"noOptions",null),n(this,"elAddOptions",null),n(this,"elAddOption",null),n(this,"placeholder",null),n(this,"placeholderStyle",""),n(this,"placeholderClass",""),Object.assign(this,o),this.target=e;var s=this.getDataOptions(e,"fudge");this.opts=a(a(a({},this.defaults),i),s),this.opts=this.cast(this.opts),this.mode=this.opts.mode,this.parseInitialOptions(),this.init()}var e,l;return e=t,(l=[{key:"init",value:function(){var t=this,e=this.target;this.targetStyle=e.getAttribute("style"),this.targetClass=e.getAttribute("class"),!1===this.opts.showTarget&&(e.style.display="none"),e.Fudge=this,this.empty(this.opts.placeholder)&&e.hasAttribute("placeholder")&&(this.opts.placeholder=e.getAttribute("placeholder"));var i="";null!==this.opts.maxDropdownHeight&&(i=' style="max-height:'.concat(this.opts.maxDropdownHeight,'"'));var s="";null!==this.opts.zindex&&(s+="z-index:".concat(this.opts.zindex,";")),""!==s&&(s=' style="'.concat(s,'"'));var n=this.opts.iconSearch;this.opts.add&&(n=this.opts.iconAdd);var o=this.html('\n<div class="fudge '.concat(this.opts.theme,'" tabindex="0" aria-haspopup="true" aria-expanded="false" aria-haspopup="listbox" ').concat(s,'>\n    <div class="fudge-display ').concat(this.targetClass,'" style="').concat(this.targetStyle,'">\n        <div class="fudge-placeholder" style="').concat(this.opts.placeholderStyle,'" class="').concat(this.opts.placeholderClass,'">\n            ').concat(this.opts.placeholder,'\n        </div>\n        <div class="fudge-selected">\n            &nbsp;\n        </div>\n        <div class="fudge-openclose">').concat(this.opts.iconDropdown,'</div>\n    </div>\n    <div class="fudge-dropdown" role="listbox">\n        <div class="fudge-input">\n            <div class="fudge-input-icon">\n                ').concat(n,'\n            </div>\n            <input class="fudge-input-el">\n        </div>\n        <div class="fudge-add-option fudge-hidden">\n            <div class="fudge-option fudge-adding"><span class="fudge-bold">Add: </span><span class="fudge-add"></span></div>\n        </div>\n        <div class="fudge-no-options fudge-hidden">\n            <div class="fudge-option fudge-bold fudge-no">').concat(this.opts.msgNoResults,'</div>\n        </div>\n        <div class="fudge-options" ').concat(i,">\n        </div>\n    </div>\n</div>\n"));this.insertAfter(e,o),this.fudge=o,this.dropdown=o.querySelector(".fudge-dropdown"),this.openclose=o.querySelector(".fudge-openclose"),this.fudgeOptions=o.querySelector(".fudge-options"),this.selected=o.querySelector(".fudge-selected"),this.display=o.querySelector(".fudge-display"),this.input=o.querySelector(".fudge-input-el"),this.noOptions=o.querySelector(".fudge-no-options"),this.elAddOptions=o.querySelector(".fudge-add-option"),this.elAddOption=o.querySelector(".fudge-add"),this.placeholder=o.querySelector(".fudge-placeholder"),this.buildInitialOptions(),this.highlight(e.value),this.select(e.value),this.openclose.addEventListener("click",(function(){!1===t.opened?t.open():t.close()})),this.selected.addEventListener("mousedown",(function(){!1===t.opened&&t.open()})),this.fudge.addEventListener("focus",(function(){!1===t.opened&&t.open()})),this.input.addEventListener("keydown",(function(e){var i;"Tab"===(null!==(i=e.key)&&void 0!==i?i:null)&&(e.preventDefault(),t.close())})),this.input.addEventListener("keyup",(function(e){e.preventDefault(),t.keys(e)})),this.target.addEventListener("change",(function(){t.select(t.target.value),t.close()})),this.elAddOptions.addEventListener("mouseenter",(function(){t.highlight("add")})),this.elAddOptions.addEventListener("click",(function(){t.select()}))}},{key:"open",value:function(){var t=this;if(!1===this.opened){this.opening=!0,this.opened=!0,this.fudge.classList.add("open"),this.fudge.setAttribute("aria-expanded","true"),this.input.focus(),"select"===this.mode&&this.highlight(this.target.value);var e=this;null===this.clickedInsideFunction&&(this.clickedInsideFunction=function(t){e.fudge.contains(t.target)||(document.removeEventListener("click",this.clickedInsideFunction,!0),e.close(),this.clickedInsideFunction=null)},document.addEventListener("click",this.clickedInsideFunction,!0)),setTimeout((function(){t.opening=!1,t.input.focus()}),100)}}},{key:"close",value:function(){!0===this.opened&&!1===this.opening&&(this.opened=!1,this.fudge.classList.remove("open"),this.fudge.setAttribute("aria-expanded","false"),this.input.value="",this.filter(),null!==this.clickedInsideFunction&&(document.removeEventListener("click",this.clickedInsideFunction,!0),this.clickedInsideFunction=null))}},{key:"keys",value:function(t){var e,i=null!==(e=t.key)&&void 0!==e?e:null;"ArrowDown"===i?this.highlight("next"):"ArrowUp"===i?this.highlight("prev"):"Enter"===i?this.select():"Escape"===i?this.close():"Home"===i?this.highlight("first"):"End"===i?this.highlight("last"):this.filter()}},{key:"parseInitialOptions",value:function(){var t,e,s=this;if(this.options=[],this.empty(this.opts.options))"SELECT"===this.target.nodeName&&this.empty(this.opts.options)&&this.target.querySelectorAll("option").forEach((function(i){t=i.value,e=i.innerHTML,s.options.push({value:t,text:e})}));else if("string"==typeof this.opts.options)try{JSON.parse(this.opts.options).forEach((function(i){var n,o;t=null!==(n=i.value)&&void 0!==n?n:i.text,e=null!==(o=i.text)&&void 0!==o?o:i.value,s.options.push({value:t,text:e})}))}catch(i){this.opts.options.split(this.opts.glue).forEach((function(i){var n,o=i.split(s.opts.glueOption);t=o[0],e=null!==(n=o[1])&&void 0!==n?n:o[0],s.options.push({value:t,text:e})}))}else"object"===i(this.opts.options)&&this.opts.options.forEach((function(n){var o;if("object"===i(n))t=n.value,e=null!==(o=n.value)&&void 0!==o?o:n.text,s.options.push({value:t,text:e});else if("string"==typeof n){var l,a=n.split(s.opts.glueOption);t=a[0],e=null!==(l=a[1])&&void 0!==l?l:a[0],s.options.push({value:t,text:e})}}))}},{key:"buildInitialOptions",value:function(){var t=this,e="";this.options.forEach((function(i){e+=t.buildOption(i.value,i.text)})),this.fudgeOptions.innerHTML=e,this.fudgeOptions.querySelectorAll(".fudge-option").forEach((function(e){e.addEventListener("click",(function(){t.select(e)})),e.addEventListener("mouseenter",(function(){t.highlight(e)}))}))}},{key:"buildOption",value:function(t,e){return this.empty(e)&&(e=t),""===e&&(e="&nbsp;"),'<div class="fudge-option" data-value="'.concat(t,'" data-text="').concat(e,'" role="option">').concat(e,"</div>")}},{key:"addOption",value:function(t,e){var i,s,n=this;if(t=null!==(i=t)&&void 0!==i?i:this.input.value,e=null!==(s=e)&&void 0!==s?s:this.input.value,this.empty(t)&&this.empty(e))return!1;var o=this.fudgeOptions.querySelector("[data-value='".concat(t,"']"));if(!this.empty(o))return o;var l=this.html(this.buildOption(t,e));return this.fudgeOptions.append(l),this.highlight(this.input.value),this.hide(this.noOptions),this.input.value="",this.hide(this.addiItems),this.elAddOption.innerHTML="",this.filter(),this.highlight(t),l.addEventListener("click",(function(){n.select(l)})),l.addEventListener("mouseenter",(function(){n.highlight(l)})),l}},{key:"buildTag",value:function(t,e){var i;return e=null!==(i=e)&&void 0!==i?i:t,this.html('\n<div class="fudge-tag" data-value="'.concat(t,'" data-text="').concat(e,'">\n    <div class="fudge-tag-text">').concat(e,'</div>\n    <div class="fudge-tag-remove">').concat(this.opts.iconRemove,"</div>\n</div>"))}},{key:"addTag",value:function(t){var e=this;(-1===this.opts.tagLimit||this.addedTags<this.opts.tagLimit)&&("object"===i(t)&&t.classList.contains("fudge-option")?(t.classList.add("fudge-hidden"),t=this.buildTag(t.getAttribute("data-value"),t.getAttribute("data-text"))):"string"==typeof t&&(t=this.buildTag(t)),null!==t&&(this.selected.append(t),this.addedTags+=1,t.querySelector(".fudge-tag-remove").addEventListener("click",(function(){e.removeTag(t)})),this.setTagsValue()))}},{key:"removeTag",value:function(t){"string"==typeof t&&(t=this.selected.querySelector('[data-value="'.concat(t,'"]'))),this.empty(t)||(this.fudgeOptions.querySelector('[data-value="'.concat(t.getAttribute("data-value"),'"]')).classList.remove("fudge-hidden"),this.addedTags-=1,t.remove(),this.setTagsValue(),this.filter(),this.input.focus())}},{key:"setTagsValue",value:function(){var t=this.selected.querySelectorAll(".fudge-tag"),e=[],i="";t.forEach((function(t){e.push(t.getAttribute("data-value"))})),i=e.join(this.opts.glue),!0===this.opts.glueEnd&&(i+=this.opts.glue),i===this.opts.glue&&(i=""),this.value=i,this.target.value=i,this.triggerEvent(this.target,"updated"),this.triggerEvent(this.target,"input"),this.empty(i)&&this.setPlaceholder()}},{key:"setPlaceholder",value:function(){var t=this.fudgeOptions.querySelector("[data-value='']");this.empty(t)&&this.empty(this.value)?this.placeholder.classList.remove("fudge-hidden"):this.placeholder.classList.add("fudge-hidden")}},{key:"filter",value:function(t){var e,i=this;if(t=(t=null!==(e=t)&&void 0!==e?e:this.input.value).toLowerCase(),"select"===this.mode)this.fudgeOptions.querySelectorAll(".fudge-option").forEach((function(e){e.getAttribute("data-text").toLowerCase().indexOf(t)>=0?i.showOption(e):i.hideOption(e)}));else{var s=this.opts.glue+this.target.value+this.opts.glue;this.fudgeOptions.querySelectorAll(".fudge-option").forEach((function(e){var n=i.opts.glue+e.getAttribute("data-value")+i.opts.glue;e.getAttribute("data-text").toLowerCase().indexOf(t)>=0&&-1===s.indexOf(n)?i.showOption(e):i.hideOption(e)}))}0===this.fudgeOptions.querySelectorAll(".fudge-option:not(.fudge-hidden)").length?this.show(this.noOptions):this.hide(this.noOptions),!0===this.opts.add&&(this.elAddOption.innerHTML=this.input.value,""===t?this.hide(this.elAddOptions):this.show(this.elAddOptions)),this.highlight("filter")}},{key:"highlight",value:function(t){var e;t=null!==(e=t)&&void 0!==e?e:"";var s;s=!0===this.opts.add&&""!==this.input.value?this.fudge.querySelectorAll(".fudge-option:not(.fudge-hidden):not(.fudge-no)"):this.fudgeOptions.querySelectorAll(".fudge-option:not(.fudge-hidden)");var n=this.fudge.querySelector(".fudge-highlight"),o=null,l=-1;if("object"===i(t))o=t;else if("clear"===t)o=null;else if("add"===t)o=this.elAddOptions.querySelector(".fudge-option");else if("first"===t)o=s[0];else if("last"===t)o=s[s.length-1];else if("next"===t){if(this.empty(n))o=s[0];else{for(l=0;l<s.length&&s[l]!==n;l+=1);o=s[l+1]}this.empty(o)&&(o=s[s.length-1])}else if("prev"===t){for(l=0;l<s.length&&s[l]!==n;l+=1);l>=1&&(o=s[l-1]),this.empty(o)&&(o=s[0])}else if("filter"===t){var a;!0===this.opts.add?1===s.length?o=s[0]:s.length>=1&&(o=s[1]):o=null!==(a=s[0])&&void 0!==a?a:null}else this.empty(t)||(o=this.fudgeOptions.querySelector("[data-value='".concat(t,"']")));this.empty(n)||n.classList.remove("fudge-highlight"),this.empty(o)||o.classList.add("fudge-highlight")}},{key:"showOption",value:function(t){t.classList.remove("fudge-hidden"),t.innerHTML=this.glow(t)}},{key:"hideOption",value:function(t){t.classList.contains("fudge-hidden")||(t.classList.add("fudge-hidden"),t.classList.remove("fudge-highlight"))}},{key:"glow",value:function(t,e){var i,s="";e=null!==(i=e)&&void 0!==i?i:this.input.value.toLowerCase();var n=t.getAttribute("data-text");if(this.empty(e)||this.opts.glowDisable)s=n;else{var o=n.toLowerCase().indexOf(e),l=o+e.length,a=n.substring(0,o).replace(/ /g,"&nbsp;"),u=n.substring(o,l).replace(/ /g,"&nbsp;"),d=n.substring(l,n.length).replace(/ /g,"&nbsp;");s="".concat(a,'<span class="fudge-glow">').concat(u,"</span>").concat(d)}return s}},{key:"select",value:function(t){var e;if(null===(t=null!==(e=t)&&void 0!==e?e:null)){var s=this.fudge.querySelector(".fudge-highlight");null!==s&&(s.classList.contains("fudge-adding")&&(s=this.addOption()),t=s)}else"string"==typeof t&&(t=this.addOption(t));if(!1===t&&(t=this.fudgeOptions.querySelector("[data-value='']")),null!==t&&"object"===i(t))if("tags"===this.mode)this.addTag(t),this.input.value="",this.filter(),this.input.focus(),this.addedTags===this.opts.taglimit&&this.close(!0);else if(this.selected.innerHTML=t.getAttribute("data-text"),this.value=t.getAttribute("data-value"),t.setAttribute("aria-selected","true"),this.fudgeOptions.querySelector("[aria-selected]").removeAttribute("aria-selected"),this.close(),this.target.value!==this.value){if("SELECT"===this.target.nodeName){var n=this.target.querySelector("[value='".concat(this.value,"']"));this.empty(n)&&this.target.append(this.html('<option value="'.concat(this.value,'">').concat(this.value,"</option>")))}this.target.value=this.value,this.triggerEvent(this.target,"updated"),this.triggerEvent(this.target,"input")}this.setPlaceholder()}},{key:"hide",value:function(t){this.empty(t)||t.classList.add("fudge-hidden")}},{key:"show",value:function(t){this.empty(t)||t.classList.remove("fudge-hidden")}}])&&s(e.prototype,l),t}();window.Fudge=e})();
//# sourceMappingURL=fudge.min.js.map